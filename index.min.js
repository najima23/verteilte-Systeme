const express = require('express');
const app = express();
const port = 30000;
const moment = require('moment');

function setHTML(req, res, next) {
  res.header('Content-Type', 'text/html');
  next();
}
app.use(setHTML);
app.disable('etag');

app.get('*', (req, res) => {
  const time = new moment().format('HH:mm:ss');
  const html = `<html><body>${time}</body></html>`;
  const length = Buffer.byteLength(html, 'utf8');

  if (res.statusCode === 200) {
    res.statusMessage = 'OK';
  }

  res.header('Content-Length', length);
  res.status('200').send(html);
});

app.listen(port, () => {
  console.log('Connected to Port: ', port);
});
